<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `rdkafka` crate.">
    <meta name="keywords" content="rust, rustlang, rust-lang, rdkafka">

    <title>rdkafka - Rust</title>

    <link rel="stylesheet" type="text/css" href="../normalize.css">
    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">
    

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'></p><script>window.sidebarCurrent = {name: 'rdkafka', ty: 'mod', relpath: '../'};</script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content mod">
<h1 class='fqn'><span class='in-band'>Crate <a class='mod' href=''>rdkafka</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../src/rdkafka/lib.rs.html#1-175' title='goto source code'>[src]</a></span></h1>
<div class='docblock'>
<h1 id='rust-rdkafka' class='section-header'><a href='#rust-rdkafka'>rust-rdkafka</a></h1>
<p>Kafka client library for Rust based on <a href="https://github.com/edenhill/librdkafka">librdkafka</a>.</p>

<h2 id='the-library' class='section-header'><a href='#the-library'>The library</a></h2>
<p><code>rust-rdkafka</code> provides a safe Rust interface to librdkafka. It is currently based on librdkafka 0.9.5.</p>

<h3 id='documentation' class='section-header'><a href='#documentation'>Documentation</a></h3>
<ul>
<li><a href="https://fede1024.github.io/rust-rdkafka/">Current master branch</a></li>
<li><a href="https://docs.rs/rdkafka/">Latest release</a></li>
<li><a href="https://github.com/fede1024/rust-rdkafka/blob/master/changelog.md">Changelog</a></li>
</ul>

<h3 id='features' class='section-header'><a href='#features'>Features</a></h3>
<p>The main features provided at the moment are:</p>

<ul>
<li>Support for Kafka 0.8.x, 0.9.x and 0.10.x (timestamp support coming soon). For more information about  broker compatibility options, check the <a href="https://github.com/edenhill/librdkafka/wiki/Broker-version-compatibility">librdkafka documentation</a>.</li>
<li>Consume from single or multiple topics.</li>
<li>Automatic consumer rebalancing.</li>
<li>Customizable rebalance, with pre and post rebalance callbacks.</li>
<li>Offset commit.</li>
<li>Message production.</li>
<li>Access to cluster metadata (list of topic-partitions, replicas, active brokers etc).</li>
<li>Access to group metadata (list groups, list members of groups, hostnames etc).</li>
<li>Access to producer and consumer metrics and statistics.</li>
</ul>

<h3 id='client-types' class='section-header'><a href='#client-types'>Client types</a></h3>
<p><code>rust-rdkafka</code> provides low level and high level consumers and producers. Low level:</p>

<ul>
<li><a href="https://docs.rs/rdkafka/0.10.0/rdkafka/consumer/base_consumer/struct.BaseConsumer.html"><code>BaseConsumer</code></a>: simple wrapper around the librdkafka consumer. It requires to be periodically <code>poll()</code>ed in order to execute callbacks, rebalances and to receive messages.</li>
<li><a href="https://docs.rs/rdkafka/0.10.0/rdkafka/producer/struct.BaseProducer.html"><code>BaseProducer</code></a>: simple wrapper around the librdkafka producer. As in the consumer case, the user must call <code>poll()</code> periodically to execute delivery callbacks.</li>
</ul>

<p>High level:</p>

<ul>
<li><a href="https://docs.rs/rdkafka/0.10.0/rdkafka/consumer/stream_consumer/struct.StreamConsumer.html"><code>StreamConsumer</code></a>: it returns a <a href="https://docs.rs/futures/0.1.3/futures/stream/trait.Stream.html"><code>stream</code></a> of messages and takes care of polling the consumer internally.</li>
<li><a href="https://docs.rs/rdkafka/0.10.0/rdkafka/producer/struct.FutureProducer.html"><code>FutureProducer</code></a>: it returns a <a href="https://docs.rs/futures/0.1.3/futures/trait.Future.html"><code>future</code></a> that will be completed once the message is delivered to Kafka (or failed).</li>
</ul>

<p><em>Warning</em>: the library is under active development and the APIs are likely to change.</p>

<h3 id='asynchronous-data-processing-with-tokio-rs' class='section-header'><a href='#asynchronous-data-processing-with-tokio-rs'>Asynchronous data processing with tokio-rs</a></h3>
<p><a href="https://tokio.rs/">tokio-rs</a> is a platform for fast processing of asynchronous events in Rust. The interfaces exposed by the <code>StreamConsumer</code> and the <code>FutureProducer</code> allow rust-rdkafka users to easily integrate Kafka consumers and producers within the tokio-rs platform, and write asynchronous message processing code. Note that rust-rdkafka can be used without tokio-rs.</p>

<p>To see rust-rdkafka in action with tokio-rs, check out the <a href="https://github.com/fede1024/rust-rdkafka/blob/master/examples/asynchronous_processing.rs">asynchronous processing example</a> in the examples folder.</p>

<h3 id='at-least-once-delivery' class='section-header'><a href='#at-least-once-delivery'>At-least-once delivery</a></h3>
<p>At-least-once delivery semantic is common in many streaming applications: every message is guaranteed to be processed at least once; in case of temporary failure, the message can be re-processed and/or re-delivered, but no message will be lost.</p>

<p>In order to implement at-least-once delivery the stream processing application has to carefully commit the offset only once the message has been processed. Committing the offset too early, instead, might cause message loss, since upon recovery the consumer will start from the next message, skipping the one where the failure occurred.</p>

<p>To see how to implement at-least-once delivery with <code>rdkafka</code>, check out the <a href="https://github.com/fede1024/rust-rdkafka/blob/master/examples/at_least_once.rs">at-least-once delivery example</a> in the examples folder. To know more about delivery semantics, check the <a href="https://kafka.apache.org/0101/documentation.html#semantics">message delivery semantics</a> chapter in the Kafka documentation.</p>

<h2 id='installation' class='section-header'><a href='#installation'>Installation</a></h2>
<p>Add this to your <code>Cargo.toml</code>:</p>

<pre><code class="language-toml">[dependencies]
rdkafka = &quot;^0.10.0&quot;
</code></pre>

<p>This crate will compile librdkafka from sources and link it statically to your executable. To compile librdkafka you&#39;ll need:</p>

<ul>
<li>the GNU toolchain</li>
<li>GNU <code>make</code></li>
<li><code>pthreads</code></li>
<li><code>zlib</code></li>
<li><code>libssl-dev</code>: optional, <em>not</em> included by default (feature: <code>ssl</code>).</li>
<li><code>libsasl2-dev</code>: optional, <em>not</em> included by default (feature: <code>sasl</code>).</li>
</ul>

<p>To enable ssl and sasl, use the <code>features</code> field in <code>Cargo.toml</code>. Example:</p>

<pre><code class="language-toml">[dependencies.rdkafka]
version = &quot;^0.10.0&quot;
features = [&quot;ssl&quot;, &quot;sasl&quot;]
</code></pre>

<h2 id='compiling-from-sources' class='section-header'><a href='#compiling-from-sources'>Compiling from sources</a></h2>
<p>To compile from sources, you&#39;ll have to update the submodule containing librdkafka:</p>

<pre><code class="language-bash">git submodule update --init
</code></pre>

<p>and then compile using <code>cargo</code>, selecting the features that you want. Example:</p>

<pre><code class="language-bash">cargo build --features &quot;ssl sasl&quot;
</code></pre>

<h2 id='examples' class='section-header'><a href='#examples'>Examples</a></h2>
<p>You can find examples in the <code>examples</code> folder. To run them:</p>

<pre><code class="language-bash">cargo run --example &lt;example_name&gt; -- &lt;example_args&gt;
</code></pre>

<h2 id='tests' class='section-header'><a href='#tests'>Tests</a></h2>
<h3 id='unit-tests' class='section-header'><a href='#unit-tests'>Unit tests</a></h3>
<p>The unit tests can run without a Kafka broker present:</p>

<pre><code class="language-bash">cargo test --lib
</code></pre>

<h3 id='integration-tests' class='section-header'><a href='#integration-tests'>Integration tests</a></h3>
<p>rust-rdkafka contains a suite of integration tests which is automatically executed by travis in
docker container. Given the frequent interaction with C code that rust-rdkafka has to do, tests
are executed in valgrind to check eventual memory errors and leaks.</p>

<p>To run the full suite using docker-compose:</p>

<pre><code class="language-bash">./integration_tests.sh.
</code></pre>

<p>To run locally, instead:</p>

<pre><code class="language-bash">KAFKA_HOST=&quot;kafka_server:9092&quot; cargo test
</code></pre>

<p>In this case there is a broker expected to be running on <code>KAFKA_HOST</code>.
The broker must be configured with default partition number 3 and topic autocreation in order
for the tests to succeed.</p>
</div><h2 id='reexports' class='section-header'><a href="#reexports">Reexports</a></h2>
<table><tr><td><code>pub use message::<a class='struct' href='../rdkafka/message/struct.Message.html' title='struct rdkafka::message::Message'>Message</a>;</code></td></tr></table><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='mod' href='client/index.html'
                                  title='mod rdkafka::client'>client</a></td>
                           <td class='docblock-short'>
                                <p>Common client functionalities.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='mod' href='config/index.html'
                                  title='mod rdkafka::config'>config</a></td>
                           <td class='docblock-short'>
                                <p>Configuration to create a Consumer or Producer.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='mod' href='consumer/index.html'
                                  title='mod rdkafka::consumer'>consumer</a></td>
                           <td class='docblock-short'>
                                <p>Base trait and common functionality for all consumers.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='mod' href='error/index.html'
                                  title='mod rdkafka::error'>error</a></td>
                           <td class='docblock-short'>
                                <p>Error manipulations.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='mod' href='groups/index.html'
                                  title='mod rdkafka::groups'>groups</a></td>
                           <td class='docblock-short'>
                                <p>Group membership API.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='mod' href='message/index.html'
                                  title='mod rdkafka::message'>message</a></td>
                           <td class='docblock-short'>
                                <p>Store and manipulate Kafka messages.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='mod' href='metadata/index.html'
                                  title='mod rdkafka::metadata'>metadata</a></td>
                           <td class='docblock-short'>
                                <p>Cluster metadata.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='mod' href='producer/index.html'
                                  title='mod rdkafka::producer'>producer</a></td>
                           <td class='docblock-short'>
                                <p>Producer implementations.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='mod' href='statistics/index.html'
                                  title='mod rdkafka::statistics'>statistics</a></td>
                           <td class='docblock-short'>
                                
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='mod' href='topic_partition_list/index.html'
                                  title='mod rdkafka::topic_partition_list'>topic_partition_list</a></td>
                           <td class='docblock-short'>
                                <p>A data structure representing topic, partitions and offsets, compatible with the
<code>RDKafkaTopicPartitionList</code> exported by <code>rdkafka-sys</code>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='mod' href='types/index.html'
                                  title='mod rdkafka::types'>types</a></td>
                           <td class='docblock-short'>
                                <p>This module contains type aliases for types defined in the auto-generated bindings.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='mod' href='util/index.html'
                                  title='mod rdkafka::util'>util</a></td>
                           <td class='docblock-short'>
                                <p>Utility functions.</p>
                           </td>
                       </tr></table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "rdkafka";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    <script defer src="../search-index.js"></script>
</body>
</html>